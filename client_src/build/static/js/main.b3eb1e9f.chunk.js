(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{124:function(e,t,a){},125:function(e,t,a){},126:function(e,t,a){},127:function(e,t,a){},137:function(e,t,a){},149:function(e,t,a){},150:function(e,t,a){},151:function(e,t,a){},152:function(e,t,a){},153:function(e,t,a){},165:function(e,t,a){},167:function(e,t,a){},168:function(e,t,a){},169:function(e,t,a){},170:function(e,t,a){},171:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),o=a(13),s=a(35),u=a(24),i=a(7),m=a.n(i),d=a(10),p=a(9),f=a(43),v=a.n(f),g=v.a.create({baseURL:"http://localhost:5000"}),E=function(e,t,a,n){return g({method:e,url:t,data:a,headers:{Authorization:"Bearer ".concat(n)}})},h=r.a.createContext(),b=function(e){var t=Object(n.useState)({isAdmin:!1}),a=Object(p.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)([]),s=Object(p.a)(o,2),i=s[0],f=s[1],v=Object(n.useState)([]),g=Object(p.a)(v,2),b=g[0],x=g[1],k=Object(n.useState)(!1),N=Object(p.a)(k,2),C=N[0],w=N[1],O=Object(n.useState)(!1),y=Object(p.a)(O,1)[0],j=Object(n.useState)(null),S=Object(p.a)(j,2),I=S[0],T=S[1],_=Object(n.useState)(null),P=Object(p.a)(_,2),H=P[0],L=P[1],A=Object(n.useState)([]),B=Object(p.a)(A,2),F=B[0],z=B[1],q={user:c,products:i,list:b,isAuthenticated:C,orderValidated:y,err:I,isLoading:H,categories:F},W=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("payToken"),e.prev=1,e.next=4,E("get","/categories",null,t);case 4:a=e.sent,z(a.data.categories),e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(1),new Error(e.t0);case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(m.a.mark(function e(t){var a,n,r;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),T(null),e.prev=2,e.next=5,E("post","/login",{badge:t});case 5:200===(a=e.sent).status?(localStorage.setItem("payToken",a.data.token),localStorage.setItem("userId",a.data.user._id),l(a.data.user),w(!0),L(!1)):((n=new Error("Impossible de vous connecter...")).statusCode=401,T(n),L(!1)),e.next=15;break;case 9:e.prev=9,e.t0=e.catch(2),(r=new Error("Impossible de vous connecter...")).statusCode=401,T(r),L(!1);case 15:case"end":return e.stop()}},e,null,[[2,9]])}));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=localStorage.getItem("userId"))||null!=c.username){e.next=8;break}return a=localStorage.getItem("payToken"),e.next=5,E("get","/users/".concat(t),null,a);case 5:n=e.sent,l(n.data.user),w(!0);case 8:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a,n;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("payToken"),e.next=3,E("get","/products",null,t);case 3:a=e.sent,n=[],a.data.products.forEach(function(e){n.push(e)}),f(n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement(h.Provider,{value:{state:q,login:D,checkLogin:M,logout:function(){w(!1),x([]),l({}),localStorage.removeItem("payToken"),localStorage.removeItem("userId")},getProducts:R,clickProduct:function(e){x(b.concat(e)),l(Object(u.a)({},c,{solde:c.solde-e.price}))},removeItem:function(e){var t=b[e].price,a=b;a.splice(e,1),x(a),l(Object(u.a)({},c,{solde:c.solde+t}))},getCategories:W,clearError:function(){T(null)}}},e.children)},x=(a(124),function(e){return r.a.createElement("div",{className:"row mt-3 listItem"},r.a.createElement("div",{className:"col-md-5"},r.a.createElement("strong",null,e.item.name)),r.a.createElement("div",{className:"col-md-5"},e.item.price," \u20ac"),r.a.createElement("div",{className:"col-md-2 trash",onClick:function(){return e.removeItem(e.index)}},r.a.createElement("i",{className:"fas fa-trash-alt"})))}),k=(a(125),function(e){var t=e.list.map(function(t,a){return r.a.createElement(x,{key:a,item:t,index:a,removeItem:e.removeItem})});return r.a.createElement("div",{className:"d-flex flex-column align-items-center list"},t)}),N=(a(126),function(e){return r.a.createElement("div",{className:"infos"},r.a.createElement("h3",null,"Bonjour ",e.user.username?e.user.username:""," !"),r.a.createElement("h4",null,"Solde:  ",e.user.solde?e.user.solde.toFixed(2):0," \u20ac"))}),C=a(41),w=a.n(C),O=(a(127),function(){var e=Object(n.useState)(!1),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(h),u=function(){var e=Object(d.a)(m.a.mark(function e(){var t;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("payToken"),e.next=3,E("post","orders",{list:l.state.list,userId:l.state.user._id},t);case 3:c(!0);case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"sidebar d-flex flex-column"},a?r.a.createElement(s.a,{to:"/logout"}):null,r.a.createElement(o.b,{to:"/logout"},r.a.createElement(w.a,{variant:"sidebar"},r.a.createElement("h3",null,"Deconnexion"))),r.a.createElement(N,{user:l.state.user}),r.a.createElement(k,{list:l.state.list,removeItem:l.removeItem}),r.a.createElement(w.a,{variant:"sidebar",className:"mt-auto",onClick:u},r.a.createElement("h3",null,"Valider")))}),y=a(176),j=a(178),S=a(177),I=(a(137),function(){return r.a.createElement(y.a,{className:"navbar",expand:"lg"},r.a.createElement(y.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(y.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(j.a,{className:"mr-auto nav"},r.a.createElement(o.c,{to:"/shop/reload",className:"navlink"},"Recharger"),r.a.createElement(S.a,{title:"Comptes",id:"basic-nav-dropdown",bsPrefix:"navlink"},r.a.createElement(S.a.Item,{as:"span"},r.a.createElement(o.c,{to:"/shop/users",className:"dropdown-link"},"Utilisateurs")),r.a.createElement(S.a.Item,{as:"span"},r.a.createElement(o.c,{to:"/shop/accounts",className:"dropdown-link"},"Autre"))),r.a.createElement(S.a,{title:"Produits",id:"basic-nav-dropdown",bsPrefix:"navlink"},r.a.createElement(S.a.Item,{as:"span"},r.a.createElement(o.c,{to:"/shop/products",className:"dropdown-link"},"Liste des produits")),r.a.createElement(S.a.Item,{as:"span"},r.a.createElement(o.c,{to:"/shop/categories",className:"dropdown-link"},"Cat\xe9gories"))),r.a.createElement(o.c,{to:"/shop/orders",className:"navlink"},"Commandes"),r.a.createElement(o.c,{to:"/shop",className:"navlink"},"Retour"))))}),T=a(179),_=(a(149),function(e){var t="productCard text-center";return e.solde<e.product.price&&(t="productCard productCardDisabled text-center"),r.a.createElement(T.a,{className:t,onClick:e.solde>=e.product.price?function(){return e.clickProduct(e.product)}:null},r.a.createElement(T.a.Header,null,r.a.createElement("strong",null,e.product.name)),r.a.createElement(T.a.Body,null,r.a.createElement("img",{src:e.product.img,alt:"produit",className:"productImage"})),r.a.createElement(T.a.Footer,null,e.product.price," \u20ac"))}),P=(a(150),function(e){var t=e.products.map(function(t){if(e.search){if(t.category.name===e.search)return r.a.createElement(_,{key:t._id,product:t,clickProduct:e.clickProduct,solde:e.solde})}else if(t.starred)return r.a.createElement(_,{key:t._id,product:t,clickProduct:e.clickProduct,solde:e.solde});return null});return r.a.createElement("div",{className:"products d-flex flex-wrap"},t)}),H=(a(151),function(e){var t=e.categories.map(function(e,t){return r.a.createElement(o.b,{to:"/shop?category=".concat(e.name),key:t},r.a.createElement(w.a,{variant:"catbar",className:"mt-auto"},r.a.createElement("h3",null,e.name)))});return r.a.createElement("div",null,r.a.createElement(o.b,{to:"/shop"},r.a.createElement(w.a,{variant:"catbar",className:"mt-auto"},r.a.createElement("h3",null,"Accueil"))),t)}),L=(a(152),function(e){var t=Object(n.useContext)(h);return r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row fullHeight"},r.a.createElement("div",{className:"col-md catbar"},r.a.createElement(H,{categories:t.state.categories})),r.a.createElement("div",{className:"col-md-10"},r.a.createElement(P,{products:t.state.products,clickProduct:t.clickProduct,solde:t.state.user.solde,search:e.location.search.split("=")[1]}))))}),A=a(16),B=a(33),F=a(90),z=a(175),q=(a(153),a(174)),W=function(e){var t=Object(n.useState)({name:"",value:""}),a=Object(p.a)(t,2),c=a[0],l=a[1],o=function(e){var t=Object(u.a)({},c);t[e.target.name]=e.target.value,l(t)},s=function(){var t=Object(d.a)(m.a.mark(function t(){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("payToken"),t.next=3,E("post","/accounts",c,a);case 3:n=t.sent,e.handleSuccess(n),e.handleClose();case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a.Header,{closeButton:!0},r.a.createElement(z.a.Title,null,"Cr\xe9er un compte")),r.a.createElement(z.a.Body,null,r.a.createElement(q.a,null,r.a.createElement(q.a.Label,null,"Nom"),r.a.createElement(q.a.Control,{required:!0,placeholder:"Nom du compte",type:"text",name:"name",onChange:o,value:c.name}),r.a.createElement(q.a.Label,null,"Valeur"),r.a.createElement(q.a.Control,{required:!0,placeholder:"Valeur intitiale",type:"number",name:"value",onChange:o,value:c.value}))),r.a.createElement(z.a.Footer,null,r.a.createElement(F.a,{variant:"secondary",onClick:e.handleClose},"Fermer"),r.a.createElement(F.a,{variant:"primary",onClick:s},"Enregistrer")))},D=function(e){var t=Object(n.useState)({name:""}),a=Object(p.a)(t,2),c=a[0],l=a[1],o=function(){var t=Object(d.a)(m.a.mark(function t(){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("payToken"),t.next=3,E("post","/categories",c,a);case 3:n=t.sent,e.handleSuccess(n),e.handleClose();case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a.Header,{closeButton:!0},r.a.createElement(z.a.Title,null,"Cr\xe9er une cat\xe9gorie")),r.a.createElement(z.a.Body,null,r.a.createElement(q.a,null,r.a.createElement(q.a.Label,null,"Nom"),r.a.createElement(q.a.Control,{required:!0,placeholder:"Nom de la cat\xe9gorie",type:"text",name:"name",onChange:function(e){var t=Object(u.a)({},c);t[e.target.name]=e.target.value,l(t)},value:c.name}))),r.a.createElement(z.a.Footer,null,r.a.createElement(F.a,{variant:"secondary",onClick:e.handleClose},"Fermer"),r.a.createElement(F.a,{variant:"primary",onClick:o},"Enregistrer")))},M=function(e){var t=Object(n.useState)({username:"",badge:"",isAdmin:!1}),a=Object(p.a)(t,2),c=a[0],l=a[1],o=function(e){var t=Object(u.a)({},c);"isAdmin"===e.target.name?t[e.target.name]=e.target.checked:t[e.target.name]=e.target.value,l(t)},s=function(){var t=Object(d.a)(m.a.mark(function t(){var a,n;return m.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("payToken"),t.next=3,E("put","/signup",c,a);case 3:n=t.sent,e.handleSuccess(n),e.handleClose();case 6:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(z.a.Header,{closeButton:!0},r.a.createElement(z.a.Title,null,"Cr\xe9er un utilisateur")),r.a.createElement(z.a.Body,null,r.a.createElement(q.a,null,r.a.createElement(q.a.Label,null,"Nom"),r.a.createElement(q.a.Control,{required:!0,placeholder:"Nom du nouvel utilisateur",type:"text",name:"username",onChange:o,value:c.username}),r.a.createElement(q.a.Label,null,"Badge"),r.a.createElement(q.a.Control,{required:!0,placeholder:"Badge",type:"password",name:"badge",onChange:o,value:c.badge}),r.a.createElement(q.a.Label,null,"Administrateur"),r.a.createElement(q.a.Control,{required:!0,type:"checkbox",name:"isAdmin",onChange:o,value:c.isAdmin}))),r.a.createElement(z.a.Footer,null,r.a.createElement(F.a,{variant:"secondary",onClick:e.handleClose},"Fermer"),r.a.createElement(F.a,{variant:"primary",onClick:s},"Enregistrer")))},R=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],l=a[1],o=function(){l(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"modalView"},r.a.createElement(F.a,{onClick:function(){l(!0)}},"Nouv(eau/elle) ",e.name),r.a.createElement(z.a,{show:c,onHide:o,centered:!0},function(){switch(e.entity){case"accounts":return r.a.createElement(W,{handleClose:o,handleSuccess:e.handleSuccess});case"categories":return r.a.createElement(D,{handleClose:o,handleSuccess:e.handleSuccess});case"users":return r.a.createElement(M,{handleClose:o,handleSuccess:e.handleSuccess});default:return"Error in creating form"}}())))},V=(a(165),function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(function(){s()},[]);var l=function(e){var t=a;return r.a.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0,onBlur:function(t){u(t,e)},dangerouslySetInnerHTML:{__html:t[e.index][e.column.id]}})},o=[{Header:"Nom",accessor:"username",Cell:l},{Header:"Badge",accessor:"badge",Cell:l},{Header:"Administrateur",accessor:"isAdmin",Cell:function(e){var t=a;return r.a.createElement("input",{type:"checkbox",checked:t[e.index][e.column.id],onChange:function(t){u(t,e)}})}},{Header:"Solde",accessor:"solde"},{Header:"Action",Cell:function(e){return r.a.createElement("i",{id:e.index,onClick:i,className:"fas fa-trash-alt"})},maxWidth:100,filterable:!1}],s=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("payToken"),e.next=3,E("get","/users",null,t);case 3:a=e.sent,c(a.data.users);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),u=function(){var e=Object(d.a)(m.a.mark(function e(t,n){var r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.row._original._id,l=Object(A.a)(a),"isAdmin"===n.column.id?(console.log(t.target),l[n.index][n.column.id]=t.target.checked):l[n.index][n.column.id]=t.target.innerHTML,e.prev=4,o=localStorage.getItem("payToken"),e.next=8,E("put","/users/".concat(r),l[n.index],o);case 8:c(l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.id,r=a[n]._id,l=localStorage.getItem("payToken"),e.prev=3,e.next=6,E("delete","/users/".concat(r),null,l);case 6:(o=Object(A.a)(a)).splice(n,1),c(o),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),new Error(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mt-3 text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("h2",null,"Liste des utilisateurs")),r.a.createElement("div",{className:"col-4"},r.a.createElement(R,{name:"utilisateur",entity:"users",handleSuccess:function(e){var t=[].concat(Object(A.a)(a),[e.data.createdUser]);c(t)}}))),r.a.createElement(B.a,{data:a,columns:o,showPageSizeOptions:!1,defaultPageSize:12,filterable:!0}))}),U=function(){var e=Object(n.useState)(""),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(0),o=Object(p.a)(l,2),s=o[0],u=o[1],i=Object(n.useState)([]),f=Object(p.a)(i,2),v=f[0],g=f[1];Object(n.useEffect)(function(){h()},[]);var h=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("payToken"),e.next=3,E("get","/accounts",null,t);case 3:a=e.sent,g(a.data.accounts);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),b=function(e){switch(console.log(e.target.name),e.target.name){case"badge":c(e.target.value);break;case"value":u(e.target.value)}},x=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={badge:a,solde:s},r=localStorage.getItem("payToken"),e.prev=2,e.next=5,E("post","users",n,r);case 5:return l=v.find(function(e){return"Caisse"===e.name}),o=parseFloat(l.value),o+=parseFloat(s),l.value=o,e.next=11,E("put","/accounts/".concat(l._id),l,r);case 11:c(""),u(0),e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(2),new Error(e.t0);case 18:case"end":return e.stop()}},e,null,[[2,15]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mt-3 d-flex flex-row flex-wrap justify-content-center"},r.a.createElement("h2",null,"Recharger un badge"),r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col"},"Badge"),r.a.createElement("div",{className:"col"},"Montant"),r.a.createElement("div",{className:"col"})),r.a.createElement("div",{className:"row mb-3"},r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"password",className:"form-control",name:"badge",value:a,onChange:b})),r.a.createElement("div",{className:"col"},r.a.createElement("input",{type:"number",className:"form-control",name:"value",value:s,onChange:b})),r.a.createElement("div",{className:"col"},r.a.createElement(F.a,{className:"mr-2",variant:"success",onClick:x},"Recharger")))))},J=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)({name:"",price:"",img:"",starred:!1,category:{},hasChanged:!1}),o=Object(p.a)(l,2),s=o[0],i=o[1],f=Object(n.useContext)(h);Object(n.useEffect)(function(){f.getProducts(),c(f.state.products),f.getCategories()},[]);var v=function(e){var t=Object(A.a)(a);if("starred"===e.target.name)t[e.target.id][e.target.name]=e.target.checked;else if("category"===e.target.name){var n=f.state.categories.find(function(t){return t._id===e.target.value});t[e.target.id][e.target.name]=n}else t[e.target.id][e.target.name]=e.target.value;t[e.target.id].hasChanged=!0,c(t)},g=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.id,r=a[n]._id,l=localStorage.getItem("payToken"),e.prev=3,e.next=6,E("put","/products/".concat(r),a[n],l);case 6:(o=Object(A.a)(a))[n].hasChanged=!1,c(o),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),new Error(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=Object(u.a)({},s);if("starred"===e.target.name)t.starred=e.target.checked;else if("category"===e.target.name){var a=f.state.categories.find(function(t){return t._id===e.target.value});t.category=a}else t[e.target.name]=e.target.value;t.hasChanged=!0,i(t)},x=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=localStorage.getItem("payToken"),e.prev=1,e.next=4,E("post","/products",s,n);case 4:r=e.sent,l={name:"",price:"",img:"",starred:!1,category:{},hasChanged:!1},o=Object(A.a)(a).concat(r.data.createdProduct),c(o),i(l),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(1),new Error(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.id,r=a[n]._id,l=localStorage.getItem("payToken"),e.prev=3,e.next=6,E("delete","/products/".concat(r),null,l);case 6:(o=Object(A.a)(a)).splice(n,1),c(o),e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(3),new Error(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),N=f.state.categories.map(function(e,t){return r.a.createElement("option",{key:t,value:e._id},e.name)}),C=a.map(function(e,t){return r.a.createElement("div",{key:t,className:"row text-center mb-3"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{className:"form-control",id:t,name:"name",value:e.name,onChange:v})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",className:"form-control",id:t,name:"price",value:e.price,onChange:v})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{className:"form-control",id:t,name:"img",value:e.img,onChange:v})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("select",{id:t,name:"category",value:e.category._id,onChange:v,className:"form-control"},N)),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("input",{id:t,name:"starred",className:"form-control",type:"checkbox",checked:e.starred,onChange:v})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(F.a,{className:"mr-2",variant:"success",id:t,onClick:g,disabled:!e.hasChanged},r.a.createElement("i",{className:"fas fa-check"})),r.a.createElement(F.a,{variant:"danger",id:t,onClick:k},r.a.createElement("i",{className:"fas fa-trash-alt"}))))});return r.a.createElement("div",{className:"m-5"},r.a.createElement("div",{className:"row text-center mb-3"},r.a.createElement("div",{className:"col-md-2"},"Nom"),r.a.createElement("div",{className:"col-md-2"},"Prix"),r.a.createElement("div",{className:"col-md-2"},"Image"),r.a.createElement("div",{className:"col-md-3"},"Cat\xe9gorie"),r.a.createElement("div",{className:"col-md-1"},"Starred"),r.a.createElement("div",{className:"col-md-2"})),C,r.a.createElement("div",{className:"row text-center mb-3"},r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{className:"form-control",value:s.name,name:"name",onChange:b})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{type:"number",className:"form-control",value:s.price,name:"price",onChange:b})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement("input",{className:"form-control",value:s.img,name:"img",onChange:b})),r.a.createElement("div",{className:"col-md-3"},r.a.createElement("select",{value:s.category._id,name:"category",onChange:b,className:"form-control",required:!0},r.a.createElement("option",{value:""},"Choosir Cat\xe9gorie"),N)),r.a.createElement("div",{className:"col-md-1"},r.a.createElement("input",{type:"checkbox",className:"form-control",checked:s.starred,name:"starred",onChange:b})),r.a.createElement("div",{className:"col-md-2"},r.a.createElement(F.a,{className:"mr-2",variant:"success",onClick:x,disabled:!s.hasChanged},"Cr\xe9er"))))},$=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useContext)(h);Object(n.useEffect)(function(){l.getCategories(),c(l.state.categories)},[]);var o=function(){var e=Object(d.a)(m.a.mark(function e(t,n){var r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.row._original._id,(l=Object(A.a)(a))[n.index][n.column.id]=t.target.innerHTML,e.prev=4,o=localStorage.getItem("payToken"),console.log(l[n.index]),e.next=9,E("put","/categories/".concat(r),l[n.index],o);case 9:c(l),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(4),console.log(e.t0);case 15:case"end":return e.stop()}},e,null,[[4,12]])}));return function(t,a){return e.apply(this,arguments)}}(),s=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.id,r=a[n]._id,l=localStorage.getItem("payToken"),e.prev=3,e.next=6,E("delete","/categories/".concat(r),null,l);case 6:(o=Object(A.a)(a)).splice(n,1),c(o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}(),u=[{Header:"Nom",accessor:"name",Cell:function(e){var t=a;return r.a.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0,onBlur:function(t){o(t,e)},dangerouslySetInnerHTML:{__html:t[e.index][e.column.id]}})}},{Header:"Action",Cell:function(e){return r.a.createElement("i",{id:e.index,onClick:s,className:"fas fa-trash-alt"})},maxWidth:100,filterable:!1}];return r.a.createElement("div",{className:"container mt-3 text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("h2",null,"Liste des cat\xe9gories")),r.a.createElement("div",{className:"col-4"},r.a.createElement(R,{name:"cat\xe9gorie",entity:"categories",handleSuccess:function(e){var t=[].concat(Object(A.a)(a),[e.data.createdCategory]);c(t)}}))),r.a.createElement(B.a,{data:a,columns:u,showPageSizeOptions:!1,defaultPageSize:12,filterable:!0}))},G=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(function(){l()},[]);var l=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("payToken"),e.next=3,E("get","/accounts",null,t);case 3:a=e.sent,c(a.data.accounts);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),o=function(e){var t=a;return r.a.createElement("div",{style:{backgroundColor:"#fafafa"},contentEditable:!0,suppressContentEditableWarning:!0,onBlur:function(t){u(t,e)},dangerouslySetInnerHTML:{__html:t[e.index][e.column.id]}})},s=[{Header:"Name",accessor:"name",Cell:o},{Header:"Value",accessor:"value",Cell:o},{Header:"Actions",Cell:function(e){return r.a.createElement("i",{id:e.index,onClick:i,className:"fas fa-trash-alt"})},maxWidth:100,filterable:!1}],u=function(){var e=Object(d.a)(m.a.mark(function e(t,n){var r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=n.row._original._id,(l=Object(A.a)(a))[n.index][n.column.id]=t.target.innerHTML,e.prev=4,o=localStorage.getItem("payToken"),e.next=8,E("put","/accounts/".concat(r),l[n.index],o);case 8:c(l),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[4,11]])}));return function(t,a){return e.apply(this,arguments)}}(),i=function(){var e=Object(d.a)(m.a.mark(function e(t){var n,r,l,o;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.currentTarget.id,r=a[n]._id,l=localStorage.getItem("payToken"),e.prev=3,e.next=6,E("delete","/accounts/".concat(r),null,l);case 6:(o=Object(A.a)(a)).splice(n,1),c(o),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),console.log(e.t0);case 14:case"end":return e.stop()}},e,null,[[3,11]])}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mt-3 text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8"},r.a.createElement("h2",null,"Liste des comptes non-utilisateurs")),r.a.createElement("div",{className:"col-4"},r.a.createElement(R,{name:"compte",entity:"accounts",handleSuccess:function(e){var t=[].concat(Object(A.a)(a),[e.data.account]);c(t)}}))),r.a.createElement(B.a,{data:a,columns:s,showPageSizeOptions:!1,defaultPageSize:12,filterable:!0}))},K=function(e){var t=e.list.map(function(e,t){return r.a.createElement("p",null,e.name," (",e.price,"\u20ac)")});return r.a.createElement("div",null,t)},Q=(a(166),function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)(function(){l()},[]);var l=function(){var e=Object(d.a)(m.a.mark(function e(){var t,a;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem("payToken"),e.next=3,E("get","/orders",null,t);case 3:a=e.sent,c(a.data.orders);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container mt-3 text-center"},r.a.createElement("h2",null,"Liste des commandes"),r.a.createElement(B.a,{data:a,columns:[{id:"datetime",Header:"Date & Time",accessor:function(e){return e.datetime}},{id:"username",Header:"Username",accessor:function(e){return e.userId.username}},{Header:"Price",accessor:"price"}],showPageSizeOptions:!1,defaultPageSize:12,filterable:!0,SubComponent:function(e){return r.a.createElement(K,{list:e.original.list})}}))}),X=(a(167),function(e){var t=Object(n.useContext)(h);Object(n.useEffect)(function(){t.checkLogin(),t.getProducts(),t.getCategories()},[]);var a=r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-12 no-padding"},r.a.createElement(I,null))),c=r.a.createElement(s.d,null,r.a.createElement(s.b,{path:e.match.path+"/reload",component:U}),r.a.createElement(s.b,{path:e.match.path+"/users",component:V}),r.a.createElement(s.b,{path:e.match.path+"/products",component:J}),r.a.createElement(s.b,{path:e.match.path+"/categories",component:$}),r.a.createElement(s.b,{path:e.match.path+"/accounts",component:G}),r.a.createElement(s.b,{path:e.match.path+"/orders",component:Q}),r.a.createElement(s.b,{exact:!0,path:"/shop",component:L})),l=r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/shop",component:L}));return r.a.createElement("div",{className:"container-fluid background "},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-md-9 no-padding"},t.state.user.isAdmin?a:null,t.state.user.isAdmin?c:l),r.a.createElement("div",{className:"col-md-3  no-padding"},r.a.createElement(O,null))))}),Y=a(93),Z=a(94),ee=a(96),te=a(95),ae=a(97),ne=a(173),re=(a(168),function(e){function t(){var e,a;Object(Y.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(ee.a)(this,(e=Object(te.a)(t)).call.apply(e,[this].concat(r)))).state={badge:""},a.handleChange=function(e){a.setState({badge:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.context.login(a.state.badge)},a.handleErase=function(e){a.setState({badge:""})},a}return Object(ae.a)(t,e),Object(Z.a)(t,[{key:"render",value:function(){var e=null;this.context.state.isAuthenticated&&(e=r.a.createElement(s.a,{to:"/shop"}));var t=null;null!=this.context.state.error&&(t=r.a.createElement(ne.a,{variant:"warning"},this.context.state.error.message));var a=r.a.createElement("button",{className:"btn btn-primary mt-2",onClick:this.handleErase},"Effacer");return this.context.state.isLoading&&(a=r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))),r.a.createElement("div",{className:"container-fluid background pt-5"},e,r.a.createElement("div",{className:"text-center"},t,r.a.createElement("div",{className:"card mx-auto"},r.a.createElement("div",{className:"card-header bg-dark text-white"},r.a.createElement("h2",null,"Connexion")),r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"col-md-6 offset-md-3"},r.a.createElement("form",{className:"form-group mt-3",onSubmit:this.handleSubmit},r.a.createElement("input",{type:"password",value:this.state.badge,onChange:this.handleChange,placeholder:"Badge",className:"form-control",required:!0,autoFocus:!0})),a)))))}}]),t}(n.Component));re.contextType=h;var ce=re,le=function(){var e=Object(n.useContext)(h);return Object(n.useEffect)(function(){e.logout()},[]),r.a.createElement(s.a,{to:"/login"})},oe=(a(169),a(170),function(){return r.a.createElement(b,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/login",component:ce}),r.a.createElement(s.b,{exact:!0,path:"/logout",component:le}),r.a.createElement(s.b,{path:"/shop",component:X}),r.a.createElement(s.a,{exact:!0,from:"/",to:"/logout"})))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var se=localStorage.getItem("payToken");v.a.defaults.baseURL="http://localhost:5000",v.a.defaults.headers.common.Authorization="Bearer ".concat(se),l.a.render(r.a.createElement(o.a,null,r.a.createElement(oe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},98:function(e,t,a){e.exports=a(171)}},[[98,1,2]]]);
//# sourceMappingURL=main.b3eb1e9f.chunk.js.map